<script>
  const reloadChannel = new BroadcastChannel("reload-channel");
  reloadChannel.onmessage = (event) => {
    if (event.data === "reload") {
      console.log("ğŸ” Nháº­n tÃ­n hiá»‡u reload tá»« selectfile.html");
      location.reload();
    }
  };
</script>

<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>Quáº£n lÃ½ CÃ¢u há»i</title>
    <link rel="stylesheet" href="admin.css" />
    <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
  </head>
  <body>
    <!-- Hamburger button - chá»‰ hiá»‡n trÃªn Ä‘iá»‡n thoáº¡i -->
    <button class="hamburger" onclick="toggleMobileMenu()">â•</button>

    <!-- NÃºt search riÃªng ngoÃ i navbar -->
    <button id="mobile-search-toggle" class="mobile-search-toggle">ğŸ”</button>
    <!-- Input tÃ¬m kiáº¿m áº©n ban Ä‘áº§u -->
    <div id="mobile-search-box" class="mobile-search-box">
      <input
        type="text"
        class="search-input"
        placeholder="TÃ¬m kiáº¿m cÃ¢u há»i..."
      />
    </div>

    <!-- Thanh Ä‘iá»u hÆ°á»›ng trÃªn cÃ¹ng -->
    <div class="navbar">
      <div class="left-buttons">
        <button id="toggle-form-btn">â• ThÃªm CÃ¢u há»i</button>
        <button id="favorite-toggle-btn">â­ CÃ¢u há»i yÃªu thÃ­ch</button>
        <button onclick="exportToPDF(true)">ğŸ“„ Export (1)</button>
        <button onclick="exportToPDF(false)">
          ğŸ“„ Export (2)
        </button>
        <button>
          <a href="selectfile.html" style="color: white; text-decoration: none"
            >Chá»n file cÃ¢u há»i</a
          >
        </button>
      </div>
      <div class="right-search">
        <input
          type="text"
          class="search-input2"
          placeholder="TÃ¬m kiáº¿m cÃ¢u há»i..." 
        />
        <button id="theme-toggle">Cháº¿ Ä‘á»™ Tá»‘i</button>
        <button id="missing-answer-btn">CÃ¢u chÆ°a cÃ³ Ä‘Ã¡p Ã¡n</button>
        <button
          id="wrongcount-btn"
          style="background-color: rgb(207, 207, 104); color: white"
        >
          List Error
        </button>
        <button
          id="reset-wrongcount-btn"
          style="background-color: red; color: white"
        >
          ğŸ”„ Reset cÃ¢u sai
        </button>
      </div>
    </div>

    <!-- Giao diá»‡n chÃ­nh gá»“m form + danh sÃ¡ch -->
    <div class="main-container">
      <!-- Form thÃªm/sá»­a cÃ¢u há»i (slide in/out) -->
      <div class="slide-form" id="slide-form">
        <button id="close-form" class="close-btn">âœ–</button>

        <h3 id="form-title">ThÃªm / Sá»­a CÃ¢u há»i</h3>
        <input type="hidden" id="edit-index" />

        <textarea
          id="question-text"
          placeholder="Ná»™i dung cÃ¢u há»i"
          rows="3"
        ></textarea>

        <input type="file" id="imageInput" accept="image/*" />

        <input type="text" id="answer-A" placeholder="ÄÃ¡p Ã¡n A" />
        <input type="text" id="answer-B" placeholder="ÄÃ¡p Ã¡n B" />
        <input type="text" id="answer-C" placeholder="ÄÃ¡p Ã¡n C" />
        <input type="text" id="answer-D" placeholder="ÄÃ¡p Ã¡n D" />

        <select id="correct-answer">
          <option value="A">A</option>
          <option value="B">B</option>
          <option value="C">C</option>
          <option value="D">D</option>
        </select>

        <button onclick="saveQuestion()">ğŸ’¾ LÆ°u</button>
      </div>

      <!-- Danh sÃ¡ch cÃ¢u há»i vÃ  phÃ¢n trang -->
      <div class="content" id="content-area">
        <h3>Danh sÃ¡ch CÃ¢u há»i</h3>
        <div id="questions-container"></div>
        <div id="pagination-controls"></div>
      </div>
    </div>

    <!-- NÃºt cuá»™n trang lÃªn/xuá»‘ng -->
    <button id="scroll-up" onclick="scrollToTop()">â¬†</button>
    <button id="scroll-down" onclick="scrollToBottom()">â¬‡</button>
    <button id="back-btn" onclick="goBack()">â†</button>
    <button id="admin-dashboard-btn"><a href="admin-dashboard.htm">ğŸ†</a></button>

    <!-- Phong to thu nho anh -->
    <div class="modal-overlay" id="imgOverlay" onclick="closeImage()"></div>
    <img id="modalImage" class="modal-img" onclick="closeImage()" />

    <!-- Script xá»­ lÃ½ logic quáº£n lÃ½ cÃ¢u há»i -->
    <script src="admin.js"></script>
  </body>
</html>
