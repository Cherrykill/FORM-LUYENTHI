<script>
    // BroadcastChannel ƒë·ªÉ t·∫£i l·∫°i trang khi c√≥ thay ƒë·ªïi file c√¢u h·ªèi
    const reloadChannel = new BroadcastChannel("reload-channel");
    reloadChannel.onmessage = (event) => {
        if (event.data === "reload") {
            console.log("üîÅ Nh·∫≠n t√≠n hi·ªáu reload t·ª´ selectfile.html");
            location.reload();
        }
    };
</script>

<!DOCTYPE html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <meta name="viewport" content="width=device-width, initial-scale=1.0" />
        <title>Qu·∫£n l√Ω C√¢u h·ªèi</title>
        <link rel="stylesheet" href="admin.css" />
        <script src="https://cdnjs.cloudflare.com/ajax/libs/html2pdf.js/0.10.1/html2pdf.bundle.min.js"></script>
    </head>

    <body>
        <button class="hamburger" onclick="toggleMobileMenu()">‚ûï</button>
        <button id="mobile-search-toggle" class="mobile-search-toggle">üîç</button>

        <div id="mobile-search-box" class="mobile-search-box">
            <input
                type="text"
                class="search-input"
                placeholder="T√¨m ki·∫øm c√¢u h·ªèi..."
            />
        </div>

        <div class="navbar">
            <div class="left-buttons">
                <button id="toggle-form-btn">‚ûï Th√™m C√¢u h·ªèi</button>
                <button id="favorite-toggle-btn">‚≠ê C√¢u h·ªèi y√™u th√≠ch</button>
                <button id="find-similar-btn" onclick="">üßê T√¨m C√¢u Gi·ªëng Nhau</button>
                <button onclick="exportToPDF(true)">üìÑ Export (c√≥ ƒë√°p √°n)</button>
                <button onclick="exportToPDF(false)">üìÑ Export (kh√¥ng ƒë√°p √°n)</button>
                <button>
                    <a href="selectfile.html" style="color: white; text-decoration: none">
                        Ch·ªçn file c√¢u h·ªèi
                    </a>
                </button>
            </div>

            <div class="right-search">
                <input
                    type="text"
                    class="search-input2"
                    placeholder="T√¨m ki·∫øm c√¢u h·ªèi..."
                />
                <button id="theme-toggle">Ch·∫ø ƒë·ªô T·ªëi</button>
                <button id="missing-answer-btn">C√¢u ch∆∞a c√≥ ƒë√°p √°n</button>
                <button
                    id="wrongcount-btn"
                    style="background-color: rgb(207, 207, 104); color: white"
                >
                    List Error
                </button>
                <button
                    id="reset-wrongcount-btn"
                    style="background-color: red; color: white"
                >
                    üîÑ Reset c√¢u sai
                </button>
            </div>
        </div>

        <div class="main-container">
            <div class="slide-form" id="slide-form">
                <button id="close-form" class="close-btn">‚úñ</button>
                <h3 id="form-title">Th√™m / S·ª≠a C√¢u h·ªèi</h3>
                <input type="hidden" id="edit-index" />

                <textarea
                    id="question-text"
                    placeholder="N·ªôi dung c√¢u h·ªèi"
                    rows="3"
                ></textarea>

                <input type="file" id="imageInput" accept="image/*" />

                <input type="text" id="answer-A" placeholder="ƒê√°p √°n A" />
                <input type="text" id="answer-B" placeholder="ƒê√°p √°n B" />
                <input type="text" id="answer-C" placeholder="ƒê√°p √°n C" />
                <input type="text" id="answer-D" placeholder="ƒê√°p √°n D" />

                <select id="correct-answer">
                    <option value="A">A</option>
                    <option value="B">B</option>
                    <option value="C">C</option>
                    <option value="D">D</option>
                </select>

                <button onclick="saveQuestion()">üíæ L∆∞u</button>
            </div>

            <div class="content" id="content-area">
                <h3>Danh s√°ch C√¢u h·ªèi</h3>
                <div id="info-area"></div>
                <div id="questions-container"></div>
                <div id="pagination-controls"></div>
            </div>
        </div>

        <button id="scroll-up" onclick="scrollToTop()">‚¨Ü</button>
        <button id="scroll-down" onclick="scrollToBottom()">‚¨á</button>
        <button id="back-btn" onclick="goBack()">‚Üê</button>
        <button id="admin-dashboard-btn">
            <a href="admin-dashboard.htm">üèÜ</a>
        </button>

        <div class="modal-overlay" id="imgOverlay" onclick="closeImage()"></div>
        <img id="modalImage" class="modal-img" onclick="closeImage()" />

        <script src="admin.js"></script>
    </body>
</html>